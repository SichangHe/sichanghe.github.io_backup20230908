<html lang="en" class="no-js light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steven Hé (Sīchàng)'s Home Page</title>
    <link rel="icon" href="notes/favicon.svg">
    <link rel="stylesheet" href="notes/css/variables.css">
    <link rel="stylesheet" href="notes/css/general.css">
    <link rel="stylesheet" href="notes/css/chrome.css">
    <!-- Fonts -->
    <link rel="stylesheet" href="notes/FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="notes/fonts/fonts.css">
</head>

<body>
    <script type="text/javascript">
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";

        // Work around some values being stored in localStorage wrapped in quotes
        try {
            var theme = localStorage.getItem('mdbook-theme');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }
        } catch (e) { }

        // Set the theme before any content is loaded, prevents flash
        var theme;
        try {theme = localStorage.getItem('mdbook-theme');} catch (e) { }
        if (theme === null || theme === undefined) {theme = default_theme;}
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>
    <div id="page-wrapper" class="page-wrapper">
        <div class="page">
            <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="sticky menu-bar bordered">
                <div class="left-buttons">
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                </div>
                <h1 class="menu-title">Steven&#x27;s Home Page</h1>
                <div class="right-buttons">
                    <a href="https://github.com/SichangHe" title="GitHub" aria-label="GitHub">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>
                </div>
            </div>
            <p>
            <ul>
                <li><a href="https://github.com/SichangHe">Steven Hé (Sīchàng)'s GitHub</a></li>
                <li><a href="curriculum_vitae/">Steven Hé (Sīchàng)'s Curriculum Vitae</a></li>
                <li><a href="https://sichanghe.wordpress.com">Steven Hé (Sīchàng)'s Blog</a></li>
                <li><a href="notes">Steven Hé (Sīchàng)'s Notes</a></li>
            </ul>
            </p>
            </main>
        </div>
    </div>
    </div>
    <script>
        var html = document.querySelector('html');
        var themeToggleButton = document.getElementById('theme-toggle');
        var themePopup = document.getElementById('theme-list');

        function showThemes() {
            themePopup.style.display = 'block';
            themeToggleButton.setAttribute('aria-expanded', true);
            themePopup.querySelector("button#" + get_theme()).focus();
        }

        function hideThemes() {
            themePopup.style.display = 'none';
            themeToggleButton.setAttribute('aria-expanded', false);
            themeToggleButton.focus();
        }

        function get_theme() {
            var theme;
            try {theme = localStorage.getItem('mdbook-theme');} catch (e) { }
            if (theme === null || theme === undefined) {
                return default_theme;
            } else {
                return theme;
            }
        }

        function set_theme(theme, store = true) {
            var previousTheme = get_theme();

            if (store) {
                try {localStorage.setItem('mdbook-theme', theme);} catch (e) { }
            }

            html.classList.remove(previousTheme);
            html.classList.add(theme);
        }

        // Set theme
        var theme = get_theme();

        set_theme(theme, false);

        themeToggleButton.addEventListener('click', function () {
            if (themePopup.style.display === 'block') {
                hideThemes();
            } else {
                showThemes();
            }
        });

        themePopup.addEventListener('click', function (e) {
            var theme;
            if (e.target.className === "theme") {
                theme = e.target.id;
            } else if (e.target.parentElement.className === "theme") {
                theme = e.target.parentElement.id;
            } else {
                return;
            }
            set_theme(theme);
        });

        themePopup.addEventListener('focusout', function (e) {
            // e.relatedTarget is null in Safari and Firefox on macOS (see workaround below)
            if (!!e.relatedTarget && !themeToggleButton.contains(e.relatedTarget) && !themePopup.contains(e.relatedTarget)) {
                hideThemes();
            }
        });

        // Should not be needed, but it works around an issue on macOS & iOS: https://github.com/rust-lang/mdBook/issues/628
        document.addEventListener('click', function (e) {
            if (themePopup.style.display === 'block' && !themeToggleButton.contains(e.target) && !themePopup.contains(e.target)) {
                hideThemes();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (e.altKey || e.ctrlKey || e.metaKey || e.shiftKey) {return;}
            if (!themePopup.contains(e.target)) {return;}

            switch (e.key) {
                case 'Escape':
                    e.preventDefault();
                    hideThemes();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    var li = document.activeElement.parentElement;
                    if (li && li.previousElementSibling) {
                        li.previousElementSibling.querySelector('button').focus();
                    }
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    var li = document.activeElement.parentElement;
                    if (li && li.nextElementSibling) {
                        li.nextElementSibling.querySelector('button').focus();
                    }
                    break;
                case 'Home':
                    e.preventDefault();
                    themePopup.querySelector('li:first-child button').focus();
                    break;
                case 'End':
                    e.preventDefault();
                    themePopup.querySelector('li:last-child button').focus();
                    break;
            }
        });
    </script>
</body>
